var DepartureBoard=function(e,n){n=n||{},this._element=e,this._letters=[],e.className+=" departure-board";for(var s,a,i=n.rowCount||1,t=n.letterCount||25,o=0;o<i;o++){this._letters.push([]),(a=document.createElement("div")).className="row",e.appendChild(a);for(var l=0;l<t;l++)s=new DepartureBoard.Letter,this._letters[o].push(s),a.appendChild(s.getElement())}};DepartureBoard.LETTERS=" ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.,':()&!?+-",DepartureBoard.prototype.spin=function(){for(var e=this,n=0,i=this._letters.length;n<i;n++)!function(t){window.setTimeout(function(){e._letters[t].spin()},20*t+400*Math.random())}(n)},DepartureBoard.prototype.setValue=function(e){e instanceof Array||(e=[e]);for(var n=this,i=0,t=this._letters.length;i<t;i++){e[i]=e[i]?e[i].toUpperCase():"";for(var s=0,a=this._letters[i].length;s<a;s++)!function(o,l){window.setTimeout(function(){var r=e[o].substr(l,1)||"";n._letters[o][l].setValue(r)},2e3*o+25*l+400*Math.random())}(i,s)}},DepartureBoard.Letter=function(){this._element=document.createElement("span"),this._element.className="letter",this._bottom=document.createElement("span"),this._bottom.className="flap bottom",this._element.appendChild(this._bottom),this._bottomText=document.createElement("span"),this._bottomText.className="text",this._bottom.appendChild(this._bottomText),this._top=document.createElement("span"),this._top.className="flap top",this._element.appendChild(this._top),this._topText=document.createElement("span"),this._topText.className="text",this._top.appendChild(this._topText),this._fold=document.createElement("span"),this._fold.className="fold",this._element.appendChild(this._fold),this._falling=document.createElement("span"),this._falling.className="flap falling",this._fold.appendChild(this._falling),this._fallingText=document.createElement("span"),this._fallingText.className="text",this._fallingText.style.WebkitTransitionDuration=this._fallingText.style.MozTransitionDuration=this._fallingText.style.OTransitionDuration=this._fallingText.style.transitionDuration=.5*DepartureBoard.Letter.DROP_TIME+"ms",this._falling.appendChild(this._fallingText),this._index=0,this._interval=null,this._stopAt=null},DepartureBoard.Letter.DROP_TIME=100,DepartureBoard.Letter.prototype.getElement=function(){return this._element},DepartureBoard.Letter.prototype.spin=function(e){!1!==e&&(this._stopAt=null);var n=this;this._interval=window.setInterval(function(){n._tick()},1.1*DepartureBoard.Letter.DROP_TIME)},DepartureBoard.Letter.prototype.setValue=function(e){this._stopAt=DepartureBoard.LETTERS.indexOf(e),this._stopAt<0&&(this._stopAt=0),!this._interval&&this._index!=this._stopAt&&this.spin(!1)},DepartureBoard.Letter.prototype._tick=function(){var s,e=this,n=DepartureBoard.LETTERS.charAt(this._index),i=this._falling.style,t=this._fallingText.style;this._index=(this._index+1)%DepartureBoard.LETTERS.length,s=DepartureBoard.LETTERS.charAt(this._index),this._fallingText.innerHTML=n,i.display="block",this._topText.innerHTML=s,window.setTimeout(function(){t.WebkitTransitionTimingFunction=t.MozTransitionTimingFunction=t.OTransitionTimingFunction=t.transitionTimingFunction="ease-in",t.WebkitTransform=t.MozTransform=t.OTransform=t.transform="scaleY(0)"},1),window.setTimeout(function(){e._fallingText.innerHTML=s,i.top="-.03em",i.bottom="auto",t.top="-.65em",t.WebkitTransitionTimingFunction=t.MozTransitionTimingFunction=t.OTransitionTimingFunction=t.transitionTimingFunction="ease-out",t.WebkitTransform=t.MozTransform=t.OTransform=t.transform="scaleY(1)"},DepartureBoard.Letter.DROP_TIME/2),window.setTimeout(function(){e._bottomText.innerHTML=s,i.display="none",i.top="auto",i.bottom=0,t.top=0},DepartureBoard.Letter.DROP_TIME),this._index===this._stopAt&&(clearInterval(this._interval),delete this._interval)};
//# sourceMappingURL=scripts.e40fa3c42622e5b5.js.map