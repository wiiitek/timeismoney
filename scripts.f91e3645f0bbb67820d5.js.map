{"version":3,"sources":["src/assets/libs/departure-board/js/departure-board.js"],"names":["DepartureBoard","element","options","this","_element","_letters","className","letter","rowElement","rowCount","letterCount","r","push","document","createElement","appendChild","l","Letter","getElement","LETTERS","prototype","spin","me","i","length","window","setTimeout","Math","random","setValue","value","Array","rl","toUpperCase","letterValue","substr","_bottom","_bottomText","_top","_topText","_fold","_falling","_fallingText","style","WebkitTransitionDuration","MozTransitionDuration","OTransitionDuration","transitionDuration","DROP_TIME","_index","_interval","_stopAt","clear","setInterval","_tick","indexOf","newValue","oldValue","charAt","fallingStyle","fallingTextStyle","innerHTML","display","WebkitTransitionTimingFunction","MozTransitionTimingFunction","OTransitionTimingFunction","transitionTimingFunction","WebkitTransform","MozTransform","OTransform","transform","top","bottom","clearInterval"],"mappings":"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","file":"scripts.f91e3645f0bbb67820d5.js","sourcesContent":["\n\nvar DepartureBoard = function (element, options) {\n\toptions = options || {};\n\n\tthis._element = element;\n\tthis._letters = [];\n\n\telement.className += ' departure-board';\n\n\tvar rowCount = options.rowCount || 1,\n\t\tletterCount = options.letterCount || 25,\n\t\tletter,\n\t\trowElement;\n\n\tfor (var r = 0; r < rowCount; r++) {\n\t\tthis._letters.push ([]);\n\n\t\trowElement = document.createElement ('div');\n\t\trowElement.className = 'row';\n\t\telement.appendChild (rowElement);\n\n\t\tfor (var l = 0; l < letterCount; l++) {\n\t\t\tletter = new DepartureBoard.Letter ();\n\t\t\tthis._letters[r].push (letter);\n\t\t\trowElement.appendChild (letter.getElement ());\n\t\t}\n\t}\n};\n\n\nDepartureBoard.LETTERS = \" ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.,':()&!?+-\";\n\n\n\n\nDepartureBoard.prototype.spin = function () {\n\tvar me = this;\n\n\tfor (var i = 0, l = this._letters.length; i < l; i++) {\n\t\t(function (i) {\n\t\t\twindow.setTimeout (function () {\n\t\t\t\tme._letters[i].spin ();\n\t\t\t}, 20 * i + Math.random () * 400);\n\t\t})(i);\n\t}\n};\n\n\n\n\nDepartureBoard.prototype.setValue = function (value) {\n\tif (!(value instanceof Array)) value = [value];\n\tvar me = this;\n\n\tfor (var r = 0, rl = this._letters.length; r < rl; r++) {\n\t\tvalue[r] = value[r]? value[r].toUpperCase () : '';\n\n\t\tfor (var i = 0, l = this._letters[r].length; i < l; i++) {\n\t\t\t(function (r, i) {\n\t\t\t\twindow.setTimeout (function () {\n\t\t\t\t\tvar letterValue = value[r].substr (i, 1) || '';\n\t\t\t\t\tme._letters[r][i].setValue (letterValue);\n\t\t\t\t}, 2000 * r + 25 * i + Math.random () * 400);\n\t\t\t})(r, i);\n\t\t}\n\t}\n};\n\n\n\n\n\n\n\n\nDepartureBoard.Letter = function () {\n\tthis._element = document.createElement ('span');\n\tthis._element.className = 'letter';\n\n\tthis._bottom = document.createElement ('span');\n\tthis._bottom.className = 'flap bottom';\n\tthis._element.appendChild (this._bottom);\n\n\tthis._bottomText = document.createElement ('span');\n\tthis._bottomText.className = 'text';\n\tthis._bottom.appendChild (this._bottomText);\n\n\n\tthis._top = document.createElement ('span');\n\tthis._top.className = 'flap top';\n\tthis._element.appendChild (this._top);\n\n\tthis._topText = document.createElement ('span');\n\tthis._topText.className = 'text';\n\tthis._top.appendChild (this._topText);\n\n\n\tthis._fold = document.createElement ('span');\n\tthis._fold.className = 'fold';\n\tthis._element.appendChild (this._fold);\n\n\tthis._falling = document.createElement ('span');\n\tthis._falling.className = 'flap falling';\n\tthis._fold.appendChild (this._falling);\n\n\tthis._fallingText = document.createElement ('span');\n\tthis._fallingText.className = 'text';\n\n\tthis._fallingText.style.WebkitTransitionDuration = this._fallingText.style.MozTransitionDuration =\n\t\tthis._fallingText.style.OTransitionDuration = this._fallingText.style.transitionDuration = DepartureBoard.Letter.DROP_TIME * 0.5 + 'ms';\n\n\tthis._falling.appendChild (this._fallingText);\n\n\n\tthis._index = 0;\n\tthis._interval = null;\n\tthis._stopAt = null;\n};\n\n\nDepartureBoard.Letter.DROP_TIME = 100;\n\n\n\n\nDepartureBoard.Letter.prototype.getElement = function () {\n\treturn this._element;\n};\n\n\n\n\nDepartureBoard.Letter.prototype.spin = function (clear) {\n\tif (clear !== false) this._stopAt = null;\n\n\tvar me = this;\n\tthis._interval = window.setInterval (function () { me._tick (); }, DepartureBoard.Letter.DROP_TIME * 1.1);\n};\n\n\n\n\nDepartureBoard.Letter.prototype.setValue = function (value) {\n\tthis._stopAt = DepartureBoard.LETTERS.indexOf (value);\n\n\tif (this._stopAt < 0) this._stopAt = 0;\n\tif (!this._interval && this._index != this._stopAt) this.spin (false);\n};\n\n\n\n\nDepartureBoard.Letter.prototype._tick = function () {\n\tvar me = this,\n\t\toldValue = DepartureBoard.LETTERS.charAt (this._index),\n\t\tfallingStyle = this._falling.style,\n\t\tfallingTextStyle = this._fallingText.style,\n\t\tnewValue;\n\n\n\tthis._index = (this._index + 1) % DepartureBoard.LETTERS.length;\n\tnewValue = DepartureBoard.LETTERS.charAt (this._index);\n\n\tthis._fallingText.innerHTML = oldValue;\n\tfallingStyle.display = 'block';\n\n\tthis._topText.innerHTML = newValue;\n\n\twindow.setTimeout (function () {\n\t\tfallingTextStyle.WebkitTransitionTimingFunction = fallingTextStyle.MozTransitionTimingFunction = fallingTextStyle.OTransitionTimingFunction = fallingTextStyle.transitionTimingFunction = 'ease-in';\n\t\tfallingTextStyle.WebkitTransform = fallingTextStyle.MozTransform = fallingTextStyle.OTransform = fallingTextStyle.transform = 'scaleY(0)';\n\t}, 1);\n\n\n\twindow.setTimeout (function () {\n\t\tme._fallingText.innerHTML = newValue;\n\n\t\tfallingStyle.top = '-.03em';\n\t\tfallingStyle.bottom = 'auto';\n\t\tfallingTextStyle.top = '-.65em';\n\n\t\tfallingTextStyle.WebkitTransitionTimingFunction = fallingTextStyle.MozTransitionTimingFunction = fallingTextStyle.OTransitionTimingFunction = fallingTextStyle.transitionTimingFunction = 'ease-out';\n\t\tfallingTextStyle.WebkitTransform = fallingTextStyle.MozTransform = fallingTextStyle.OTransform = fallingTextStyle.transform = 'scaleY(1)';\n\t}, DepartureBoard.Letter.DROP_TIME / 2);\n\n\n\twindow.setTimeout (function () {\n\t\tme._bottomText.innerHTML = newValue;\n\t\tfallingStyle.display = 'none';\n\n\t\tfallingStyle.top = 'auto';\n\t\tfallingStyle.bottom = 0;\n\t\tfallingTextStyle.top = 0;\n\t}, DepartureBoard.Letter.DROP_TIME);\n\n\n\tif (this._index === this._stopAt) {\n\t\tclearInterval (this._interval);\n\t\tdelete this._interval;\n\t}\n};\n\n"],"sourceRoot":"webpack:///"}